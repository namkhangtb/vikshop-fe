<div class="container my-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Danh sách sản phẩm</h2>
    <a class="btn btn-primary" [routerLink]="['/product/create']">
      <i class="bi bi-plus-lg"></i> Thêm sản phẩm
    </a>
  </div>
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th scope="col">STT</th>
          <th scope="col">Mã sản phẩm</th>
          <th scope="col">Tên sản phẩm</th>
          <th scope="col">Ảnh</th>
          <th scope="col">Giá bán lẻ</th>
          <th scope="col">Giá nhập</th>
          <th scope="col">Giá bán sỉ</th>
          <th scope="col">Giá livestream</th>
          <th scope="col">Giá thị trường</th>
          <th scope="col">Giá upsale</th>
          <th scope="col">Mã vạch</th>
          <th scope="col">Khối lượng</th>
          <th scope="col">Mô tả ngắn</th>
          <th scope="col">Tồn kho</th>
          <th scope="col">Chức năng</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of items; let i = index">
          <th scope="row">{{ i + 1 }}</th>
          <td>{{ item.productId }}</td>
          <td>{{ item.name }}</td>
          <td>
            <div class="d-flex flex-wrap gap-1">
              <ng-container *ngFor="let image of item.images">
                <img
                  *ngIf="image"
                  [src]="urlImage + image"
                  alt="Product Image"
                  class="rounded border"
                  style="width: 40px; height: 40px; object-fit: cover;"
                />
              </ng-container>
            </div>
          </td>
          <td>{{ item.retailPrice | currency : "VND" : "symbol" : "1.2" }}</td>
          <td>{{ item.importPrice | currency : "VND" : "symbol" : "1.2" }}</td>
          <td>{{ item.wholesalePrice | currency : "VND" : "symbol" : "1.2" }}</td>
          <td>{{ item.livestreamPrice | currency : "VND" : "symbol" : "1.2" }}</td>
          <td>{{ item.marketPrice | currency : "VND" : "symbol" : "1.2" }}</td>
          <td>{{ item.upsalePrice | currency : "VND" : "symbol" : "1.2" }}</td>
          <td>{{ item.barcode }}</td>
          <td>{{ item.weight }}</td>
          <td>{{ item.shortDescription }}</td>
          <td>{{ item.stock }}</td>
          <td>
            <div class="d-flex gap-2">
              <button class="btn btn-sm btn-outline-primary" (click)="goToEditProduct(item)">
                <i class="bi bi-pencil"></i> Sửa
              </button>
              <button class="btn btn-sm btn-outline-danger" (click)="openDeleteModal(item)">
                <i class="bi bi-trash"></i> Xóa
              </button>
            </div>
            <app-delete
              *ngIf="isOpenDeleteModal"
              [productIdDelete]="productIdDelete"
              (closedDeleteModal)="closeDeleteModal($event)"
              (deleted)="handleDeleted($event)"
            ></app-delete>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
